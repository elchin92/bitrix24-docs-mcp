# Парсинг и индексация

Каталог для утилит на Python, которые скачивают, очищают и индексируют документацию Bitrix24.

Предполагаемые компоненты:
- `fetch_docs.py` — загрузка HTML-страниц Bitrix24 (с учётом robots.txt и лимитов).
- `normalize.py` — очистка разметки, конвертация в Markdown/JSON.
- `build_index.py` — построение полнотекстового или векторного индекса.

Результаты работы скриптов должны сохраняться в каталоге `data/`. При реализации важно документировать параметры и формат выходных файлов. Зависимости будут описаны в `pyproject.toml`.

## Установка окружения

```bash
cd scripts
python -m venv .venv
source .venv/bin/activate  # или .venv\Scripts\activate в Windows
pip install -e .[dev]
```

После установки можно запускать CLI-команды, которые будут добавлены в модуль `bitrix24_docs_etl`.

## Проверка доступности источника

```bash
bitrix24-docs check --log INFO
```

Команда выводит статус соединения с `https://apidocs.bitrix24.ru/` и проверяет `robots.txt`. Флаг `--json` возвращает результат в JSON, `--save` сохраняет robots.txt в файл.

## Обход и выгрузка страниц

```bash
bitrix24-docs crawl --max-pages 50 --max-depth 2 --save --manifest ../data/raw/manifest.json
```

Параметры:
- `--max-pages` — ограничение на количество страниц.
- `--max-depth` — глубина обхода ссылок (0 — только стартовая страница).
- `--save` — сохраняет HTML и метаданные в `data/raw/`.
- `--manifest` — путь для JSON с описанием сохранённых страниц.
- `--json` — выводит список найденных страниц без сохранения файлов.
