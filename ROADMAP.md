# Дорожная карта Bitrix24 Documentation MCP

Этот документ фиксирует ключевые этапы, необходимые для запуска публичного MCP-сервера, аналогичного Microsoft Learn MCP, но ориентированного на документацию Bitrix24 REST API.

## Этап 0. Подготовка (выполнено)
- Сформирована структура репозитория.
- Зафиксированы требования и ссылки на MCP-документацию (`doc/Documentation.md`, `doc/Specification.md`, `doc/Schema_Reference.md`, `doc/Community.md`).

## Этап 1. Сбор и нормализация контента
1. Выбрать стратегию обхода сайта (`sitemap`, ручной список разделов, проверка `robots.txt`).
2. Реализовать скрипт загрузки HTML-страниц (`scripts/fetch_docs.*`).
3. Очистить контент от навигации и лишней разметки, сохранить структуру в `data/processed/` (JSON/Markdown).
4. Добавить юнит-тесты на корректность разметки (проверка заголовков, ссылок, дедупликация).

## Этап 2. Индексация и поиск
1. Определить механизм поиска: полнотекстовый (SQLite FTS5/Elasticlunr) или векторный (Sentence Transformers).
2. Реализовать сборку индекса (`scripts/build_index.*`).
3. Подготовить структуру хранения метаданных (URL, заголовок, хэши).
4. Добавить тесты на релевантность и корректную пагинацию (см. раздел Pagination в `doc/Specification.md`).

## Этап 3. MCP-сервер (локальный прототип)
1. Выбрать SDK (TypeScript или Python) и транспорт (`stdio` для локальной отладки).
2. Реализовать команду `tools/list` с инструментом `bitrix_docs_search` (см. схемы в `doc/Schema_Reference.md`).
3. Создать метод получения полного документа (`bitrix_docs_fetch`), возвращающий контент и метаданные.
4. Учесть требования безопасности и согласия из `doc/Specification.md` (раздел Security and Trust & Safety).
5. Написать автотесты на ответы сервера.

## Этап 4. Документация и UX
1. Расписать процесс установки и запуска в `README.md` (обновить после реализации этапов 1-3).
2. Подготовить примеры конфигураций для клиентов (VS Code, Claude, MCP Inspector).
3. Описать рекомендации по промптам (аналогично Microsoft MCP README).
4. Зафиксировать политику обновлений данных и частоту пересборки индекса.

## Этап 5. Публичный endpoint
1. Выбрать хостинг (serverless, container, VM) и обеспечить доступность по HTTPS.
2. Настроить observability (логирование, метрики запросов по MCP).
3. Добавить rate limiting и защиту от злоупотреблений.
4. Обновить документацию с публичным URL и инструкциями по подключению.

## Этап 6. Развитие
- Улучшение ранжирования (векторный поиск, переранжировка).
- Поддержка дополнительных инструментов (например, фильтрация по сущностям CRM).
- Перевод интерфейсов/README на английский для широкой аудитории при выходе в паблик.
- Публикация релизов и поддержка сообщества (issues, discussions).

