# Дорожная карта Bitrix24 Documentation MCP

Этот документ фиксирует ключевые этапы, необходимые для запуска публичного MCP-сервера, аналогичного Microsoft Learn MCP, но ориентированного на документацию Bitrix24 REST API.

## Этап 0. Подготовка (выполнено)
- Сформирована структура репозитория.
- Зафиксированы требования и ссылки на MCP-документацию (`doc/Documentation.md`, `doc/Specification.md`, `doc/Schema_Reference.md`, `doc/Community.md`).

## Этап 1. Сбор и нормализация контента
- [x] Выбрать стратегию обхода сайта (`sitemap`, ручной список разделов, проверка `robots.txt`).
- [x] Реализовать скрипт загрузки HTML-страниц (`scripts/fetch_docs.*`).
- [x] Очистить контент от навигации и лишней разметки, сохранить структуру в `data/processed/` (JSON/Markdown).
- [ ] Добавить юнит-тесты на корректность разметки (проверка заголовков, ссылок, дедупликация).

## Этап 2. Индексация и поиск
- [x] Определить первичный механизм поиска (простой JSON-индекс) и API для дальнейшего расширения.
- [x] Реализовать сборку индекса (`bitrix24-docs index`).
- [x] Подготовить структуру хранения метаданных (URL, заголовок, хэши).
- [ ] Добавить тесты на релевантность и корректную пагинацию (см. раздел Pagination в `doc/Specification.md`).
- [ ] Исследовать переход на полнотекстовый/векторный индекс.

## Этап 3. MCP-сервер (локальный прототип)
- [x] Выбрать SDK (TypeScript) и транспорт (`stdio` для локальной отладки).
- [x] Реализовать инструмент `bitrix_docs_search` (см. схемы в `doc/Schema_Reference.md`).
- [x] Добавить инструмент `bitrix_docs_fetch`, возвращающий Markdown и метаданные.
- [ ] Учесть требования безопасности и согласия из `doc/Specification.md` (раздел Security and Trust & Safety) и задокументировать решения.
- [ ] Написать автотесты на ответы сервера.

## Этап 4. Документация и UX
1. Расписать процесс установки и запуска в `README.md` (обновить после реализации этапов 1-3).
2. Подготовить примеры конфигураций для клиентов (VS Code, Claude, MCP Inspector).
3. Описать рекомендации по промптам (аналогично Microsoft MCP README).
4. Зафиксировать политику обновлений данных и частоту пересборки индекса.

## Этап 5. Публичный endpoint
1. Выбрать хостинг (serverless, container, VM) и обеспечить доступность по HTTPS.
2. Настроить observability (логирование, метрики запросов по MCP).
3. Добавить rate limiting и защиту от злоупотреблений.
4. Обновить документацию с публичным URL и инструкциями по подключению.

## Этап 6. Развитие
- Улучшение ранжирования (векторный поиск, переранжировка).
- Поддержка дополнительных инструментов (например, фильтрация по сущностям CRM).
- Перевод интерфейсов/README на английский для широкой аудитории при выходе в паблик.
- Публикация релизов и поддержка сообщества (issues, discussions).
